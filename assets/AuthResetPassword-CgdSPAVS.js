import{g as B,h as F,r as l,j as s,o as I,G as o,S as x,aV as f,bl as C,I as A,F as R,B as k,a as q,bw as W,m as D}from"./index-DlGxA0AR.js";import{F as L,c as T,a as j}from"./formik.esm-Dp9SPN8J.js";import{u as V}from"./useScriptRef-CHRCS9U9.js";import{s as z,a as G}from"./password-strength-_dbWWfI_.js";import{I as g}from"./InputLabel-CAS4qYAm.js";import{E as M}from"./Eye-BA6JAuf4.js";import{E as $}from"./EyeSlash-C0BeFnwk.js";import{F as m}from"./FormHelperText-BjerNUfA.js";function Y(){const u=V(),P=B(),{isLoggedIn:b}=F(),[a,y]=l.useState(),[c,S]=l.useState(!1),v=()=>{S(!c)},E=r=>{r.preventDefault()},p=r=>{const e=z(r);y(G(e))};return l.useEffect(()=>{p("")},[]),s.jsx(s.Fragment,{children:s.jsx(L,{initialValues:{password:"",confirmPassword:"",submit:null},validationSchema:T().shape({password:j().max(255).required("Password is required"),confirmPassword:j().required("Confirm Password is required").test("confirmPassword","Both Password must be match!",(r,e)=>e.parent.password===r)}),onSubmit:async(r,{setErrors:e,setStatus:t,setSubmitting:n})=>{try{u.current&&(t({success:!0}),n(!1),I({open:!0,message:"Successfuly reset password.",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{P(b?"/auth/login":"/login",{replace:!0})},1500))}catch(i){console.error(i),u.current&&(t({success:!1}),e({submit:i.message}),n(!1))}},children:({errors:r,handleBlur:e,handleChange:t,handleSubmit:n,isSubmitting:i,touched:d,values:h})=>s.jsx("form",{noValidate:!0,onSubmit:n,children:s.jsxs(o,{container:!0,spacing:3,children:[s.jsxs(o,{item:!0,xs:12,children:[s.jsxs(x,{spacing:1,children:[s.jsx(g,{htmlFor:"password-reset",children:"Password"}),s.jsx(f,{fullWidth:!0,error:!!(d.password&&r.password),id:"password-reset",type:c?"text":"password",value:h.password,name:"password",onBlur:e,onChange:w=>{t(w),p(w.target.value)},endAdornment:s.jsx(C,{position:"end",children:s.jsx(A,{"aria-label":"toggle password visibility",onClick:v,onMouseDown:E,edge:"end",color:"secondary",children:c?s.jsx(M,{}):s.jsx($,{})})}),placeholder:"Enter password"})]}),d.password&&r.password&&s.jsx(m,{error:!0,id:"helper-text-password-reset",children:r.password}),s.jsx(R,{fullWidth:!0,sx:{mt:2},children:s.jsxs(o,{container:!0,spacing:2,alignItems:"center",children:[s.jsx(o,{item:!0,children:s.jsx(k,{sx:{bgcolor:a==null?void 0:a.color,width:85,height:8,borderRadius:"7px"}})}),s.jsx(o,{item:!0,children:s.jsx(q,{variant:"subtitle1",fontSize:"0.75rem",children:a==null?void 0:a.label})})]})})]}),s.jsxs(o,{item:!0,xs:12,children:[s.jsxs(x,{spacing:1,children:[s.jsx(g,{htmlFor:"confirm-password-reset",children:"Confirm Password"}),s.jsx(f,{fullWidth:!0,error:!!(d.confirmPassword&&r.confirmPassword),id:"confirm-password-reset",type:"password",value:h.confirmPassword,name:"confirmPassword",onBlur:e,onChange:t,placeholder:"Enter confirm password"})]}),d.confirmPassword&&r.confirmPassword&&s.jsx(m,{error:!0,id:"helper-text-confirm-password-reset",children:r.confirmPassword})]}),r.submit&&s.jsx(o,{item:!0,xs:12,children:s.jsx(m,{error:!0,children:r.submit})}),s.jsx(o,{item:!0,xs:12,children:s.jsx(W,{children:s.jsx(D,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Reset Password"})})})]})})})})}export{Y as A};
