import{r as h,h as S,j as e,bv as v,H as C,G as r,S as d,aV as x,bl as A,I as F,N as L,a as B,bt as P,as as q,bw as M,m as T,P as D}from"./index-DlGxA0AR.js";import{F as G,c as R,a as j}from"./formik.esm-Dp9SPN8J.js";import{u as V}from"./useScriptRef-CHRCS9U9.js";import{I as g}from"./InputLabel-CAS4qYAm.js";import{F as c}from"./FormHelperText-BjerNUfA.js";import{E as W}from"./Eye-BA6JAuf4.js";import{E as $}from"./EyeSlash-C0BeFnwk.js";import{C as z}from"./Checkbox-CdHpUIEu.js";function H({forgot:u}){const[w,f]=h.useState(!1),{isLoggedIn:E,login:b}=S(),m=V(),[l,y]=h.useState(!1),O=()=>{y(!l)},k=s=>{s.preventDefault()};return e.jsx(e.Fragment,{children:e.jsx(G,{initialValues:{userOrEmail:"GMAS",password:"root1234",submit:null},validationSchema:R().shape({userOrEmail:j().max(50).required("El usuario es requerido"),password:j().max(255).required("La contraseña es requerida")}),onSubmit:async(s,{setErrors:t,setStatus:a,setSubmitting:i})=>{try{await b(s.userOrEmail,s.password),m.current&&(a({success:!0}),i(!1),v("v1/ApplicationSettings/menu/dashboard",C))}catch(o){console.error(o),m.current&&(a({success:!1}),t({submit:o.message}),i(!1))}},children:({errors:s,handleBlur:t,handleChange:a,handleSubmit:i,isSubmitting:o,touched:n,values:p})=>e.jsx("form",{noValidate:!0,onSubmit:i,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,xs:12,children:[e.jsxs(d,{spacing:1,children:[e.jsx(g,{htmlFor:"userOrEmail-login",children:"Usuario"}),e.jsx(x,{id:"userOrEmail-login",type:"text",value:p.userOrEmail,name:"userOrEmail",onBlur:t,onChange:a,placeholder:"Ingrese su usuario",fullWidth:!0,error:!!(n.userOrEmail&&s.userOrEmail)})]}),n.userOrEmail&&s.userOrEmail&&e.jsx(c,{error:!0,id:"standard-weight-helper-text-userOrEmail-login",children:s.userOrEmail})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsxs(d,{spacing:1,children:[e.jsx(g,{htmlFor:"password-login",children:"Contraseña"}),e.jsx(x,{fullWidth:!0,error:!!(n.password&&s.password),id:"-password-login",type:l?"text":"password",value:p.password,name:"password",onBlur:t,onChange:a,endAdornment:e.jsx(A,{position:"end",children:e.jsx(F,{"aria-label":"toggle password visibility",onClick:O,onMouseDown:k,edge:"end",color:"secondary",children:l?e.jsx(W,{}):e.jsx($,{})})}),placeholder:"Ingrese su contraseña"})]}),n.password&&s.password&&e.jsx(c,{error:!0,id:"standard-weight-helper-text-password-login",children:s.password})]}),e.jsx(r,{item:!0,xs:12,sx:{mt:-1},children:e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(L,{control:e.jsx(z,{checked:w,onChange:I=>f(I.target.checked),name:"checked",color:"primary",size:"small"}),label:e.jsx(B,{variant:"h6",children:"Mantenerme conectado"})}),e.jsx(P,{variant:"h6",component:q,to:E&&u?u:"/forgot-password",color:"text.primary",children:"¿Olvidaste tu contraseña?"})]})}),s.submit&&e.jsx(r,{item:!0,xs:12,children:e.jsx(c,{error:!0,children:s.submit})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(M,{children:e.jsx(T,{disableElevation:!0,disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Iniciar sesión"})})})]})})})})}H.propTypes={forgot:D.string};export{H as A};
