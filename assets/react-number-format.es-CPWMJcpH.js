import{R as k,r as T}from"./index-DlGxA0AR.js";function et(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}var $;(function(t){t.event="event",t.props="prop"})($||($={}));function B(){}function St(t){var e,r=void 0;return function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return e&&a.length===e.length&&a.every(function(f,l){return f===e[l]})||(e=a,r=t.apply(void 0,a)),r}}function L(t){return!!(t||"").match(/\d/)}function q(t){return t==null}function Vt(t){return typeof t=="number"&&isNaN(t)}function It(t){return q(t)||Vt(t)||typeof t=="number"&&!isFinite(t)}function wt(t){var e=T.useRef(t);e.current=t;var r=T.useRef(function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return e.current.apply(e,a)});return r.current}function tt(t,e){return Array(e+1).join(t)}function bt(t){var e=t+"",r=e[0]==="-"?"-":"";r&&(e=e.substring(1));var a=e.split(/[eE]/g),n=a[0],f=a[1];if(f=Number(f),!f)return r+n;n=n.replace(".","");var l=1+f,s=n.length;return l<0?n="0."+tt("0",Math.abs(l))+n:l>=s?n=n+tt("0",l-s):n=(n.substring(0,l)||"0")+"."+n.substring(l),r+n}function J(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var r=t.createTextRange();return r.move("character",e),r.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}var pt=St(function(t,e){for(var r=0,a=0,n=t.length,f=e.length;t[r]===e[r]&&r<n;)r++;for(;t[n-1-a]===e[f-1-a]&&f-a>r&&n-a>r;)a++;return{from:{start:r,end:n-a},to:{start:r,end:f-a}}});function At(t,e,r){return Math.min(Math.max(t,e),r)}function H(t){return Math.max(t.selectionStart,t.selectionEnd)}function xt(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Et(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function rt(t,e){return t===void 0&&(t=" "),typeof t=="string"?t:t[e]||" "}function Ot(t){var e=t.currentValue,r=t.formattedValue,a=t.currentValueIndex,n=t.formattedValueIndex;return e[a]===r[n]}function Nt(t,e,r,a,n,f,l){l===void 0&&(l=Ot);var s=n.findIndex(function(A){return A}),h=t.slice(0,s);!e&&!r.startsWith(h)&&(e=h,r=h+r,a=a+h.length);for(var S=r.length,b=t.length,x={},c=new Array(S),C=0;C<S;C++){c[C]=-1;for(var o=0,p=b;o<p;o++){var y=l({currentValue:r,lastValue:e,formattedValue:t,currentValueIndex:C,formattedValueIndex:o});if(y&&x[o]!==!0){c[C]=o,x[o]=!0;break}}}for(var d=a;d<S&&(c[d]===-1||!f(r[d]));)d++;var E=d===S||c[d]===-1?b:c[d];for(d=a-1;d>0&&c[d]===-1;)d--;var I=d===-1||c[d]===-1?0:c[d]+1;return I>E?E:a-I<E-a?I:E}function z(t,e,r,a){var n=t.length;if(e=At(e,0,n),a==="left"){for(;e>=0&&!r[e];)e--;e===-1&&(e=r.indexOf(!0))}else{for(;e<=n&&!r[e];)e++;e>n&&(e=r.lastIndexOf(!0))}return e===-1&&(e=n),e}function Tt(t){for(var e=Array.from({length:t.length+1}).map(function(){return!0}),r=0,a=e.length;r<a;r++)e[r]=!!(L(t[r])||L(t[r-1]));return e}function Ft(t,e,r,a,n,f){f===void 0&&(f=B);var l=wt(function(o,p){var y,d;return It(o)?(d="",y=""):typeof o=="number"||p?(d=typeof o=="number"?bt(o):o,y=a(d)):(d=n(o,void 0),y=a(d)),{formattedValue:y,numAsString:d}}),s=T.useState(function(){return l(q(t)?e:t,r)}),h=s[0],S=s[1],b=function(o,p){o.formattedValue!==h.formattedValue&&S({formattedValue:o.formattedValue,numAsString:o.value}),f(o,p)},x=t,c=r;q(t)&&(x=h.numAsString,c=!0);var C=l(x,c);return T.useMemo(function(){S(C)},[C.formattedValue]),[h,b]}function Rt(t){return t.replace(/[^0-9]/g,"")}function Bt(t){return t}function Mt(t){var e=t.type;e===void 0&&(e="text");var r=t.displayType;r===void 0&&(r="input");var a=t.customInput,n=t.renderText,f=t.getInputRef,l=t.format;l===void 0&&(l=Bt);var s=t.removeFormatting;s===void 0&&(s=Rt);var h=t.defaultValue,S=t.valueIsNumericString,b=t.onValueChange,x=t.isAllowed,c=t.onChange;c===void 0&&(c=B);var C=t.onKeyDown;C===void 0&&(C=B);var o=t.onMouseUp;o===void 0&&(o=B);var p=t.onFocus;p===void 0&&(p=B);var y=t.onBlur;y===void 0&&(y=B);var d=t.value,E=t.getCaretBoundary;E===void 0&&(E=Tt);var I=t.isValidInputCharacter;I===void 0&&(I=L);var A=t.isCharacterSame,F=et(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),K=Ft(d,h,!!S,l,s,b),Q=K[0],w=Q.formattedValue,P=Q.numAsString,nt=K[1],U=T.useRef({formattedValue:w,numAsString:P}),X=function(i,u){U.current={formattedValue:i.formattedValue,numAsString:i.value},nt(i,u)},Y=T.useState(!1),at=Y[0],it=Y[1],_=T.useRef(null),M=T.useRef({setCaretTimeout:null,focusTimeout:null});T.useEffect(function(){return it(!0),function(){clearTimeout(M.current.setCaretTimeout),clearTimeout(M.current.focusTimeout)}},[]);var ut=l,W=function(i,u){var v=parseFloat(u);return{formattedValue:i,value:u,floatValue:isNaN(v)?void 0:v}},R=function(i,u,v){i.selectionStart===0&&i.selectionEnd===i.value.length||(J(i,u),M.current.setCaretTimeout=setTimeout(function(){i.value===v&&i.selectionStart!==u&&J(i,u)},0))},j=function(i,u,v){return z(i,u,E(i),v)},G=function(i,u,v){var V=E(u),O=Nt(u,w,i,v,V,I,A);return O=z(u,O,V),O},ot=function(i){var u=i.formattedValue;u===void 0&&(u="");var v=i.input,V=i.source,O=i.event,m=i.numAsString,g;if(v){var N=i.inputValue||v.value,D=H(v);v.value=u,g=G(N,u,D),g!==void 0&&R(v,g,u)}u!==w&&X(W(u,m),{event:O,source:V})};T.useEffect(function(){var i=U.current,u=i.formattedValue,v=i.numAsString;w!==u&&(w!==P||u!==v)&&X(W(w,P),{event:void 0,source:$.props})},[w,P]);var ft=_.current?H(_.current):void 0,vt=typeof window<"u"?T.useLayoutEffect:T.useEffect;vt(function(){var i=_.current;if(w!==U.current.formattedValue&&i){var u=G(U.current.formattedValue,w,ft);i.value=w,R(i,u,w)}},[w]);var lt=function(i,u,v){var V=pt(w,i),O=Object.assign(Object.assign({},V),{lastValue:w}),m=s(i,O),g=ut(m);if(m=s(g,void 0),x&&!x(W(g,m))){var N=u.target,D=H(N),Ct=G(i,w,D);return N.value=w,R(N,Ct,w),!1}return ot({formattedValue:g,numAsString:m,inputValue:i,event:u,source:v,input:u.target}),!0},ct=function(i){var u=i.target,v=u.value,V=lt(v,i,$.event);V&&c(i)},st=function(i){var u=i.target,v=i.key,V=u.selectionStart,O=u.selectionEnd,m=u.value;m===void 0&&(m="");var g;if(v==="ArrowLeft"||v==="Backspace"?g=Math.max(V-1,0):v==="ArrowRight"?g=Math.min(V+1,m.length):v==="Delete"&&(g=V),g===void 0||V!==O){C(i);return}var N=g;if(v==="ArrowLeft"||v==="ArrowRight"){var D=v==="ArrowLeft"?"left":"right";N=j(m,g,D),N!==g&&i.preventDefault()}else v==="Delete"&&!I(m[g])?N=j(m,g,"right"):v==="Backspace"&&!I(m[g])&&(N=j(m,g,"left"));N!==g&&R(u,N,m),i.isUnitTestRun&&R(u,N,m),C(i)},dt=function(i){var u=i.target,v=function(){var V=u.selectionStart,O=u.selectionEnd,m=u.value;if(m===void 0&&(m=""),V===O){var g=j(m,V);g!==V&&R(u,g,m)}};v(),requestAnimationFrame(function(){v()}),o(i)},mt=function(i){i.persist&&i.persist();var u=i.target,v=i.currentTarget;_.current=u,M.current.focusTimeout=setTimeout(function(){var V=u.selectionStart,O=u.selectionEnd,m=u.value;m===void 0&&(m="");var g=j(m,V);g!==V&&!(V===0&&O===m.length)&&R(u,g,m),p(Object.assign(Object.assign({},i),{currentTarget:v}))},0)},gt=function(i){_.current=null,clearTimeout(M.current.focusTimeout),clearTimeout(M.current.setCaretTimeout),y(i)},ht=at&&xt()?"numeric":void 0,Z=Object.assign({inputMode:ht},F,{type:e,value:w,onChange:ct,onKeyDown:st,onMouseUp:dt,onFocus:mt,onBlur:gt});if(r==="text")return n?k.createElement(k.Fragment,null,n(w,F)||null):k.createElement("span",Object.assign({},F,{ref:f}),w);if(a){var yt=a;return k.createElement(yt,Object.assign({},Z,{ref:f}))}return k.createElement("input",Object.assign({},Z,{ref:f}))}function kt(t,e){var r=e.format,a=e.allowEmptyFormatting,n=e.mask,f=e.patternChar;if(f===void 0&&(f="#"),t===""&&!a)return"";for(var l=0,s=r.split(""),h=0,S=r.length;h<S;h++)r[h]===f&&(s[h]=t[l]||rt(n,l),l+=1);return s.join("")}function _t(t,e,r){e===void 0&&(e=Et(t));var a=r.format,n=r.patternChar;n===void 0&&(n="#");var f=e.from,l=e.to,s=e.lastValue;s===void 0&&(s="");var h=function(y){return a[y]===n},S=function(y,d){for(var E="",I=0;I<y.length;I++)h(d+I)&&L(y[I])&&(E+=y[I]);return E},b=function(y){return y.replace(/[^0-9]/g,"")};if(!a.match(/\d/))return b(t);if(s===""&&t.length===a.length){for(var x="",c=0;c<t.length;c++)if(h(c))L(t[c])&&(x+=t[c]);else if(t[c]!==a[c])return b(t);return x}var C=s.substring(0,f.start),o=t.substring(l.start,l.end),p=s.substring(f.end);return""+S(C,0)+b(o)+S(p,f.end)}function jt(t,e){var r=e.format,a=e.mask,n=e.patternChar;n===void 0&&(n="#");var f=Array.from({length:t.length+1}).map(function(){return!0}),l=0,s=-1,h={};r.split("").forEach(function(c,C){var o=void 0;c===n&&(l++,o=rt(a,l-1),s===-1&&t[C]===o&&(s=C)),h[C]=o});for(var S=function(c){return r[c]===n&&t[c]!==h[c]},b=0,x=f.length;b<x;b++)f[b]=b===s||S(b)||S(b-1);return f[r.indexOf(n)]=!0,f}function Dt(t){var e=t.mask;if(e){var r=e==="string"?e:e.toString();if(r.match(/\d/g))throw new Error("Mask "+e+" should not contain numeric character;")}}function Lt(t,e){return t===""?!0:!(e!=null&&e.match(/\d/))&&typeof t=="string"&&(!!t.match(/^\d+$/)||t==="")}function Kt(t){t.mask,t.allowEmptyFormatting;var e=t.format,r=t.inputMode;r===void 0&&(r="numeric");var a=t.onKeyDown;a===void 0&&(a=B);var n=t.patternChar;n===void 0&&(n="#");var f=t.value,l=t.defaultValue,s=t.valueIsNumericString,h=et(t,["mask","allowEmptyFormatting","format","inputMode","onKeyDown","patternChar","value","defaultValue","valueIsNumericString"]);Dt(t);var S=function(o){return jt(o,t)},b=function(o){var p=o.key,y=o.target,d=y.selectionStart,E=y.selectionEnd,I=y.value;if(d!==E){a(o);return}var A=d;if(p==="Backspace"||p==="Delete"){var F="right";if(p==="Backspace"){for(;A>0&&e[A-1]!==n;)A--;F="left"}else{for(var K=e.length;A<K&&e[A]!==n;)A++;F="right"}A=z(I,A,S(I),F)}else e[A]!==n&&p!=="ArrowLeft"&&p!=="ArrowRight"&&(A=z(I,A+1,S(I),"right"));A!==d&&J(y,A),a(o)},x=q(f)?l:f,c=s??Lt(x,e),C=Object.assign(Object.assign({},t),{valueIsNumericString:c});return Object.assign(Object.assign({},h),{value:f,defaultValue:l,valueIsNumericString:c,inputMode:r,format:function(o){return kt(o,C)},removeFormatting:function(o,p){return _t(o,p,C)},getCaretBoundary:S,onKeyDown:b})}function Ut(t){var e=Kt(t);return k.createElement(Mt,Object.assign({},e))}export{Ut as P};
