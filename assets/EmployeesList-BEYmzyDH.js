import{j as t,a as b,C as u,S as x,f as g,I as p,g as y,h as j,r as n,o as f,A as E,M as S}from"./index-DlGxA0AR.js";import{B as F}from"./index-7Qti63TH.js";import{u as N,d as I}from"./employees-BnEvMwow.js";import{C as h}from"./Checkbox-CdHpUIEu.js";import{E as v}from"./Eye-BA6JAuf4.js";import{E as k}from"./Edit-DvqEbTVR.js";import{T as z}from"./Trash-BXUkiIWs.js";import"./ArrowLeft-DgXiCSs-.js";import"./TextField-Dbihm-yT.js";import"./InputLabel-CAS4qYAm.js";import"./FormHelperText-BjerNUfA.js";import"./TableDocument-DWQb3OC6.js";import"./index-ByAXKYUS.js";import"./getImageUrl-uZoa92S7.js";const A=({onEdit:s,onDelete:l,onView:o}={})=>[{id:"select",header:({table:a})=>t.jsx(h,{checked:a.getIsAllPageRowsSelected(),indeterminate:a.getIsSomePageRowsSelected(),onChange:e=>{a.getToggleAllPageRowsSelectedHandler()(e)},sx:{padding:0}}),cell:({row:a})=>t.jsx(h,{checked:a.getIsSelected(),disabled:!a.getCanSelect(),onChange:e=>{a.getToggleSelectedHandler()(e)},sx:{padding:0}}),enableColumnFilter:!1,enableSorting:!1,enableHiding:!1,size:50,meta:{skipFilter:!0}},{accessorKey:"id",header:"ID",cell:({getValue:a})=>{const e=a();return e?e.substring(0,8)+"...":"N/A"},enableColumnFilter:!0,size:100,filterFn:"includesString",defaultIsVisible:!1,toolTip:"ID del empleado"},{accessorKey:"identification",header:"Cédula",enableColumnFilter:!0,size:120,filterFn:"includesString"},{accessorKey:"firstName",header:"Nombre Completo",cell:({row:a})=>{const{firstName:e,middleName:r,lastName:c,secondLastName:d}=a.original,m=`${e||""} ${r||""} ${c||""} ${d||""}`.trim();return t.jsx(b,{variant:"subtitle1",children:m||"N/A"})},enableColumnFilter:!0,size:250,filterFn:"includesString"},{accessorKey:"dateBirth",header:"Fecha de Nacimiento",cell:({getValue:a})=>{const e=a();return e?new Date(e).toLocaleDateString("es-ES"):"N/A"},enableColumnFilter:!1,size:150},{accessorKey:"cellphoneNumber",header:"Celular",cell:({getValue:a})=>a()||"N/A",enableColumnFilter:!0,size:120,filterFn:"includesString"},{accessorKey:"degreeObtained",header:"Título Obtenido",enableColumnFilter:!0,size:150,filterFn:"includesString",defaultIsVisible:!1},{accessorKey:"emergencyContact",header:"Contacto de Emergencia",enableColumnFilter:!0,size:200,filterFn:"includesString",defaultIsVisible:!1},{accessorKey:"emergencyContactPhone",header:"Teléfono de Emergencia",enableColumnFilter:!0,size:150,filterFn:"includesString",defaultIsVisible:!1},{accessorKey:"status",header:"Estado",cell:a=>{const e=a.getValue();return e===!0||e==="active"||e===1?t.jsx(u,{color:"success",label:"Activo",size:"small",variant:"light"}):e===!1||e==="inactive"||e===0?t.jsx(u,{color:"error",label:"Inactivo",size:"small",variant:"light"}):t.jsx(u,{color:"info",label:"Desconocido",size:"small",variant:"light"})},enableColumnFilter:!1,size:100},{id:"actions",header:"Acciones",accessorKey:"actions",cell:({row:a})=>{const e=a.original;return t.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:[o&&t.jsx(g,{title:"Ver",children:t.jsx(p,{color:"secondary",onClick:r=>{r.stopPropagation(),o(e)},children:t.jsx(v,{})})}),s&&t.jsx(g,{title:"Editar",children:t.jsx(p,{color:"primary",onClick:r=>{r.stopPropagation(),s(e)},children:t.jsx(k,{})})}),l&&t.jsx(g,{title:"Eliminar",children:t.jsx(p,{color:"error",onClick:r=>{r.stopPropagation(),l(e)},children:t.jsx(z,{})})})]})},enableColumnFilter:!1,enableSorting:!1,enableHiding:!1,size:120,meta:{skipFilter:!0}}];function q(){const s=y(),{selectedCompany:l}=j(),{employeesLoading:o,employees:a}=N(l==null?void 0:l.companyId),e=n.useCallback(()=>{s("/apps/employees/create")},[s]),r=n.useCallback(i=>{s(`/apps/employees/edit/${i.id}`)},[s]),c=n.useCallback(async i=>{if(window.confirm(`¿Está seguro de eliminar al empleado ${i.firstName} ${i.lastName}?`))try{await I(i.id,l==null?void 0:l.companyId),f({open:!0,message:"Empleado eliminado exitosamente",variant:"alert",alert:{color:"success"}})}catch(C){f({open:!0,message:C.message||"Error al eliminar el empleado",variant:"alert",alert:{color:"error"}})}},[l]),d=n.useMemo(()=>[{label:"Nuevo Empleado",icon:t.jsx(E,{}),onClick:e,color:"primary",variant:"contained"}],[e]),m=n.useMemo(()=>A({onEdit:r,onDelete:c}),[r,c]);return o?t.jsx(S,{children:t.jsx(b,{variant:"h5",align:"center",children:"Cargando empleados..."})}):t.jsx(F,{tableId:"employees-general-table",title:"Lista de Empleados",columns:m,data:a,enableRowSelection:!0,filterOnHeaderVisible:!0,tableNowrap:!0,actions:d})}export{q as default};
