import{g as b,a1 as S,r as a,o as p,j as e,B as d,a as u,S as n,m as x,A as T}from"./index-DlGxA0AR.js";import{c as D,d as V}from"./employeeSocialVisits-CmX41fXd.js";import"./VisitForm-D8FkEQZx.js";import{E as k}from"./EmployeeSocialVisitsColumns-DwZWhyni.js";import{u as w}from"./useTabStyles-RXA9q_xN.js";import{u as I,C as B}from"./useConfirmDialog-B4uIsMqU.js";import{B as A}from"./index-7Qti63TH.js";import"./VisitProfileTabs-C6kloKA1.js";import{C as N}from"./CircularProgress-9Q1cfhaT.js";import{A as R}from"./ArrowLeft-DgXiCSs-.js";import"./index.esm-DuBBEoLH.js";import"./visits-DCe-1QN_.js";import"./TextField-Dbihm-yT.js";import"./InputLabel-CAS4qYAm.js";import"./FormHelperText-BjerNUfA.js";import"./Checkbox-CdHpUIEu.js";import"./Eye-BA6JAuf4.js";import"./Edit-DvqEbTVR.js";import"./Trash-BXUkiIWs.js";import"./TableDocument-DWQb3OC6.js";import"./index-ByAXKYUS.js";import"./getImageUrl-uZoa92S7.js";import"./Clock-DeKETPTB.js";const ae=()=>{const s=b(),{tabPanelStyles:f}=w(),{visit:r}=S(),t=r==null?void 0:r.id,{employeeSocialVisits:g,employeeSocialVisitsLoading:C,employeeSocialVisitsError:h}=D(t,"Confirmado"),{dialogState:i,openDialog:l,closeDialog:y}=I(),j=a.useCallback(()=>{s(`/apps/visits/${t}/details/create`)},[s,t]),c=a.useCallback(o=>{s(`/apps/visits/${t}/details/edit/${o.id}`)},[s,t]),m=a.useCallback(async o=>{l({title:"Eliminar Detalle",message:"¿Está seguro de eliminar este detalle de visita? Esta acción no se puede deshacer.",severity:"error",confirmText:"Eliminar",onConfirm:async()=>{try{await V(o.id,t),p({open:!0,message:"Detalle de visita eliminado exitosamente",variant:"alert",alert:{color:"success"}})}catch(E){p({open:!0,message:E.message||"Error al eliminar el detalle de visita",variant:"alert",alert:{color:"error"}})}}})},[t,l]),v=a.useMemo(()=>k({onEdit:c,onDelete:m}),[c,m]);return C?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(N,{})}):h?e.jsx(d,{sx:{p:3},children:e.jsx(u,{color:"error",children:"Error al cargar las visitas confirmadas"})}):e.jsxs(e.Fragment,{children:[e.jsxs(n,{spacing:3,sx:{...f,pt:3},children:[e.jsxs(n,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(u,{variant:"h5",children:"Visitas sociales confirmadas"}),e.jsxs(n,{direction:"row",spacing:2,children:[e.jsx(x,{variant:"outlined",size:"small",startIcon:e.jsx(R,{}),onClick:()=>s("/apps/visits/list"),sx:{fontWeight:600},children:"Regresar"}),e.jsx(x,{variant:"contained",size:"small",startIcon:e.jsx(T,{}),onClick:j,sx:{fontWeight:600},children:"Nuevo Detalle"})]})]}),e.jsx(A,{data:g||[],columns:v,filterOnHeaderVisible:!0,enableRowSelection:!0,tableId:"employeeSocialVisitsConfirmedTable",tableNowrap:!0})]}),e.jsx(B,{open:i.open,title:i.title,message:i.message,severity:i.severity,confirmText:i.confirmText,cancelText:i.cancelText,onConfirm:i.onConfirm,onCancel:y})]})};export{ae as default};
